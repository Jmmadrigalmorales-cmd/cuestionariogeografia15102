<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Examen Interactivo - Tecnología 2º ESO</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
        .question-card { transition: all 0.3s ease; }
        .option-btn { transition: all 0.2s; }
        .hidden { display: none; }
        .correct-bg { background-color: #dcfce7; border-color: #22c55e; color: #166534; }
        .incorrect-bg { background-color: #fee2e2; border-color: #ef4444; color: #991b1b; }
        .svg-container { background: white; border-radius: 8px; padding: 10px; margin: 10px 0; border: 1px solid #e2e8f0; }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-4xl mx-auto">
        <!-- Header -->
        <header class="text-center mb-10">
            <h1 class="text-4xl font-bold text-slate-800 mb-2">Repaso de Tecnología 2º ESO</h1>
            <p class="text-slate-600 italic">"Materiales, Estructuras y Proceso Tecnológico"</p>
            <div class="mt-4 flex justify-center gap-6 text-sm font-semibold">
                <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full">Preguntas: <span id="current-count">0</span>/50</span>
                <span class="bg-red-100 text-red-800 px-3 py-1 rounded-full">Errores: <span id="error-count">0</span></span>
            </div>
        </header>

        <!-- Quiz Container -->
        <div id="quiz-container" class="space-y-8">
            <!-- Questions will be injected here -->
        </div>

        <!-- Final Action -->
        <div class="mt-12 text-center pb-20">
            <button onclick="finalizarExamen()" id="btn-finalizar" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-4 px-10 rounded-xl shadow-lg transform transition hover:scale-105">
                Finalizar Examen y Ver Resultado
            </button>
        </div>
    </div>

    <!-- Modal Resultados -->
    <div id="result-modal" class="fixed inset-0 bg-slate-900/80 hidden flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-2xl max-w-lg w-full p-8 text-center shadow-2xl">
            <h2 class="text-3xl font-bold mb-4" id="modal-title">¡Examen Finalizado!</h2>
            <div class="text-6xl font-bold text-indigo-600 mb-6" id="final-score">0/10</div>
            <p class="text-slate-700 mb-8 text-lg" id="modal-msg"></p>
            <button onclick="location.reload()" class="bg-slate-800 text-white px-6 py-2 rounded-lg font-semibold">Reintentar</button>
        </div>
    </div>

    <script>
        const questionsData = [
            // EL ACERO
            {
                q: "¿Entre qué temperaturas funde aproximadamente el acero?",
                options: ["800 y 900 °C", "1400 y 1500 °C", "2000 y 2200 °C", "500 y 600 °C"],
                correct: 1,
                topic: "Acero"
            },
            {
                q: "El acero es una aleación de hierro con un porcentaje de carbono menor a...",
                options: ["1.5%", "5.11%", "2.11%", "0.01%"],
                correct: 2,
                topic: "Acero"
            },
            {
                q: "Si una estructura usa acero para tracción y hormigón para compresión, se llama:",
                options: ["Acero puro", "Hormigón armado", "Madera laminada", "Piedra artificial"],
                correct: 1,
                topic: "Acero"
            },
            {
                q: "¿Cuál es el 'gran enemigo' de las estructuras de acero en rascacielos?",
                options: ["El viento", "La lluvia", "El fuego", "La gravedad"],
                correct: 2,
                topic: "Acero"
            },
            {
                q: "¿Qué propiedad del acero permite que se le dé forma mediante martilleo o presión?",
                options: ["Fragilidad", "Maleabilidad", "Higroscopicidad", "Anisotropía"],
                correct: 1,
                topic: "Acero"
            },
            // CATEDRALES
            {
                q: "¿Qué tipo de arco permitió elevar la altura del edificio y colocar vidrieras en el Gótico?",
                options: ["Arco de medio punto", "Arco ojival (apuntado)", "Arco plano", "Arco de herradura"],
                correct: 1,
                topic: "Catedrales",
                svg: "arch"
            },
            {
                q: "En las catedrales góticas, ¿dónde descansaba el peso de la cubierta?",
                options: ["En las vidrieras", "En pilares y gruesos contrafuertes", "En las puertas", "En el suelo directamente"],
                correct: 1,
                topic: "Catedrales"
            },
            {
                q: "A los canteros medievales se les llamaba en francés:",
                options: ["Artistes", "Maçons", "Boulangers", "Chevaliers"],
                correct: 1,
                topic: "Catedrales"
            },
            {
                q: "¿Quién era el personaje clave al frente de la construcción de una catedral?",
                options: ["El Rey", "El Maestro de obras", "El Escribano", "El Sacerdote"],
                correct: 1,
                topic: "Catedrales"
            },
            {
                q: "La frase 'Hagamos una iglesia... que nos tomen por locos' se asocia a:",
                options: ["La Catedral de Sevilla", "El Puente de Triana", "La Giralda", "La Torre Pelli"],
                correct: 0,
                topic: "Catedrales"
            },
            // TRABAJO EN EQUIPO I y II
            {
                q: "¿Cuál es la principal diferencia entre un grupo y un equipo?",
                options: ["El número de personas", "El equipo tiene un objetivo común y sinergia", "El grupo siempre trabaja mejor", "No hay ninguna diferencia"],
                correct: 1,
                topic: "Equipo"
            },
            {
                q: "En el reparto de tareas, ¿qué significa que sean 'autónomas'?",
                options: ["Que todos hacen lo mismo", "Que se realizan de forma independiente por cada par", "Que nadie las hace", "Que se hacen por ordenador"],
                correct: 1,
                topic: "Equipo"
            },
            {
                q: "¿Cuál es la fase 01 del Proceso Tecnológico?",
                options: ["Construcción", "Diseño", "Problema o Necesidad", "Evaluación"],
                correct: 2,
                topic: "Proceso",
                svg: "process"
            },
            {
                q: "¿Qué fase sigue inmediatamente al Diseño en el proceso tecnológico?",
                options: ["Evaluación", "Planificación", "Presentación", "Búsqueda de información"],
                correct: 1,
                topic: "Proceso"
            },
            {
                q: "¿Qué asegura que ningún componente del equipo perjudique al resto?",
                options: ["Gritar mucho", "El seguimiento de la tabla de tareas", "Trabajar solo", "Hacer todo el trabajo uno solo"],
                correct: 1,
                topic: "Equipo"
            },
            {
                q: "En el proceso tecnológico, ¿para qué sirve la fase de 'Evaluación'?",
                options: ["Para comprar materiales", "Para ver si el objeto funciona y cumple su función", "Para pintar el objeto", "Para vender el producto"],
                correct: 1,
                topic: "Proceso"
            },
            // ESTRUCTURAS
            {
                q: "Llamamos estructura al conjunto de partes de un cuerpo que:",
                options: ["Lo hacen bonito", "Le sustentan, protegen y le dan forma", "Lo hacen pesado", "Lo destruyen"],
                correct: 1,
                topic: "Estructuras"
            },
            {
                q: "¿Por qué las cerchas de los puentes o techos están formadas por triángulos?",
                options: ["Porque es más barato", "Porque el triángulo es la única forma geométrica que no se deforma", "Por estética", "Porque caben más barras"],
                correct: 1,
                topic: "Estructuras"
            },
            {
                q: "La resistencia de una estructura depende de:",
                options: ["Solo del color", "Del material, la cantidad y la forma", "Solo de la altura", "De nada, es azar"],
                correct: 1,
                topic: "Estructuras"
            },
            // HORMIGÓN / PIEDRA
            {
                q: "¿Cómo se llama la mezcla de solo cemento, arena y agua?",
                options: ["Hormigón", "Mortero", "Escayola", "Barro"],
                correct: 1,
                topic: "Hormigón"
            },
            {
                q: "¿Qué material se añade al mortero para fabricar hormigón?",
                options: ["Plástico", "Grava (árido grueso)", "Madera", "Cristal"],
                correct: 1,
                topic: "Hormigón"
            },
            {
                q: "¿Cuántos días tarda el hormigón fresco en alcanzar su resistencia estándar?",
                options: ["7 días", "14 días", "28 días", "365 días"],
                correct: 2,
                topic: "Hormigón"
            },
            {
                q: "El aglomerante más usado en el hormigón es el:",
                options: ["Cemento Portland", "Pegamento", "Betún", "Cal pura"],
                correct: 0,
                topic: "Hormigón"
            },
            {
                q: "La dosificación aproximada en peso del hormigón es (cemento:agua:arena:grava):",
                options: ["1 : 1 : 1 : 1", "1 : 0.5 : 2 : 4", "4 : 2 : 0.5 : 1", "2 : 2 : 2 : 2"],
                correct: 1,
                topic: "Hormigón"
            },
            // LADRILLO
            {
                q: "¿Cómo se llama la cara más larga del ladrillo?",
                options: ["Tizón", "Grueso", "Soga", "Canto"],
                correct: 2,
                topic: "Ladrillo"
            },
            {
                q: "¿Por qué hay que empapar los ladrillos antes de colocarlos?",
                options: ["Para limpiarlos", "Para que no absorban el agua del mortero", "Para que pesen más", "Para que cambien de color"],
                correct: 1,
                topic: "Ladrillo"
            },
            {
                q: "¿Qué altura total tiene la Giralda incluyendo el Giraldito?",
                options: ["55.8 m", "96.3 m", "104.1 m", "120 m"],
                correct: 2,
                topic: "Ladrillo"
            },
            {
                q: "El tercio superior de la Giralda es de época:",
                options: ["Almohade", "Romana", "Cristiana", "Moderna"],
                correct: 2,
                topic: "Ladrillo"
            },
            {
                q: "En la colocación de ladrillos, las juntas verticales deben ir:",
                options: ["Alineadas siempre", "Alternadas sin continuidad", "No debe haber juntas", "Solo se ponen en las esquinas"],
                correct: 1,
                topic: "Ladrillo"
            },
            // MADERA
            {
                q: "La propiedad de la madera de absorber o exhalar humedad se llama:",
                options: ["Ductilidad", "Higroscopicidad", "Hendidura", "Tenacidad"],
                correct: 1,
                topic: "Madera"
            },
            {
                q: "¿Qué parte del tronco es la más antigua y resistente?",
                options: ["Albura", "Cámbium", "Duramen", "Corteza"],
                correct: 2,
                topic: "Madera",
                svg: "wood"
            },
            {
                q: "La madera es un material 'Anisótropo' porque:",
                options: ["Sus propiedades son iguales en toda dirección", "Sus propiedades varían según la dirección (axial, radial, tangencial)", "Flota en el agua", "Arde fácilmente"],
                correct: 1,
                topic: "Madera"
            },
            {
                q: "¿Cuál es la materia prima para fabricar papel?",
                options: ["Plástico", "Fibras de celulosa", "Arena", "Petróleo"],
                correct: 1,
                topic: "Madera"
            },
            {
                q: "El 'Duramen' de la madera se caracteriza por ser:",
                options: ["La parte viva por donde circula la savia", "Madera seca, compacta y de color oscuro", "La piel exterior", "La parte más blanda"],
                correct: 1,
                topic: "Madera"
            },
            // PLÁSTICOS
            {
                q: "¿Qué porcentaje del petróleo se destina aproximadamente a fabricar plásticos?",
                options: ["70%", "4%", "13%", "100%"],
                correct: 1,
                topic: "Plásticos"
            },
            {
                q: "¿Qué es el 'Giro del Pacífico Norte'?",
                options: ["Una fábrica de juguetes", "Una gran isla de basura plástica en el océano", "Un tipo de reciclaje", "Una corriente de aire caliente"],
                correct: 1,
                topic: "Plásticos"
            },
            {
                q: "El reciclaje que consiste en fundir el plástico para fabricar nuevos objetos es:",
                options: ["Reciclaje químico", "Reciclaje mecánico", "Reciclaje biológico", "Reciclaje estético"],
                correct: 1,
                topic: "Plásticos"
            },
            // DUCTILIDAD / ESFUERZOS
            {
                q: "¿Qué esfuerzo tiende a 'estirar' una pieza?",
                options: ["Compresión", "Tracción", "Torsión", "Cortadura"],
                correct: 1,
                topic: "Esfuerzos"
            },
            {
                q: "¿Qué es la ductilidad?",
                options: ["La capacidad de romperse de repente", "La capacidad de deformarse plásticamente antes de romperse", "La capacidad de flotar", "La capacidad de conducir electricidad"],
                correct: 1,
                topic: "Esfuerzos"
            },
            {
                q: "Cortar con unas tijeras es un ejemplo de esfuerzo de:",
                options: ["Flexión", "Torsión", "Cortadura (Cizalladura)", "Tracción"],
                correct: 2,
                topic: "Esfuerzos"
            },
            {
                q: "¿Qué ocurrió en el Puente de Triana en 1976?",
                options: ["Se derrumbó", "Sufrió una fuerte vibración que causó pánico", "Se convirtió en madera", "Fue robado"],
                correct: 1,
                topic: "Esfuerzos"
            },
            {
                q: "En una viga que se dobla, ¿qué esfuerzo sufre la parte superior?",
                options: ["Tracción", "Compresión", "Torsión", "Ninguno"],
                correct: 1,
                topic: "Esfuerzos"
            },
            // GENERALES Y REPASO
            {
                q: "¿Cómo se llama la bola sobre la que se asienta el Giraldillo?",
                options: ["Soga", "Tinajarilla", "Bóveda", "Clave"],
                correct: 1,
                topic: "Ladrillo"
            },
            {
                q: "El cemento, al mezclarse con agua, pasa por un proceso llamado:",
                options: ["Evaporación", "Fraguado", "Oxidación", "Sublimación"],
                correct: 1,
                topic: "Hormigón"
            },
            {
                q: "En el Gótico, ¿qué permitía cubrir las paredes con vidrieras?",
                options: ["Que las paredes ya no sostenían la cubierta", "Que el cristal era muy fuerte", "Que no llovía", "El uso de madera"],
                correct: 0,
                topic: "Catedrales"
            },
            {
                q: "¿Qué fase del proceso tecnológico incluye la fabricación del objeto?",
                options: ["Planificación", "Construcción", "Diseño", "Presentación"],
                correct: 1,
                topic: "Proceso"
            },
            {
                q: "La 'Hendidura' de la madera es la facilidad para:",
                options: ["Pintarse", "Partirse en el sentido de las fibras", "Absorber agua", "Conducir calor"],
                correct: 1,
                topic: "Madera"
            },
            {
                q: "¿Qué metal es el componente principal del acero?",
                options: ["Aluminio", "Cobre", "Hierro", "Oro"],
                correct: 2,
                topic: "Acero"
            },
            {
                q: "¿Cuál de estos NO es un esfuerzo básico?",
                options: ["Flexión", "Humedad", "Torsión", "Compresión"],
                correct: 1,
                topic: "Esfuerzos"
            },
            {
                q: "Un equipo cohesionado es aquel que:",
                options: ["Se pelea siempre", "Une sus capacidades para un objetivo común", "Trabaja por separado", "No tiene líder"],
                correct: 1,
                topic: "Equipo"
            }
        ];

        let errorCounter = 0;
        let answeredQuestions = 0;

        function getSVG(type) {
            switch(type) {
                case 'arch':
                    return `
                    <div class="svg-container flex justify-around">
                        <svg width="100" height="100" viewBox="0 0 100 100">
                            <path d="M20 80 L20 40 Q50 10 80 40 L80 80" fill="none" stroke="#64748b" stroke-width="3"/>
                            <text x="50" y="95" text-anchor="middle" font-size="10" fill="#64748b">Medio Punto</text>
                        </svg>
                        <svg width="100" height="100" viewBox="0 0 100 100">
                            <path d="M20 80 L20 40 Q20 10 50 10 Q80 10 80 40 L80 80" fill="none" stroke="#indigo" stroke-width="3" style="stroke: #4f46e5;"/>
                            <path d="M20 40 L50 10 L80 40" fill="none" stroke="#4f46e5" stroke-width="2"/>
                            <text x="50" y="95" text-anchor="middle" font-size="10" fill="#4f46e5">Ojival</text>
                        </svg>
                    </div>`;
                case 'wood':
                    return `
                    <div class="svg-container flex justify-center">
                        <svg width="120" height="120" viewBox="0 0 120 120">
                            <circle cx="60" cy="60" r="50" fill="#fde68a" stroke="#92400e" stroke-width="2"/>
                            <circle cx="60" cy="60" r="35" fill="#d97706" stroke="#92400e" stroke-width="1"/>
                            <circle cx="60" cy="60" r="5" fill="#451a03"/>
                            <text x="60" y="50" text-anchor="middle" font-size="8" fill="#451a03">Duramen</text>
                            <text x="60" y="25" text-anchor="middle" font-size="8" fill="#92400e">Albura</text>
                        </svg>
                    </div>`;
                case 'process':
                    return `
                    <div class="svg-container flex justify-center">
                        <svg width="200" height="100" viewBox="0 0 200 100">
                            <circle cx="30" cy="50" r="15" fill="#10b981"/>
                            <circle cx="70" cy="50" r="15" fill="#3b82f6"/>
                            <circle cx="110" cy="50" r="15" fill="#6366f1"/>
                            <circle cx="150" cy="50" r="15" fill="#f59e0b"/>
                            <path d="M45 50 L55 50 M85 50 L95 50 M125 50 L135 50" stroke="#94a3b8" stroke-width="2"/>
                            <text x="30" y="85" text-anchor="middle" font-size="8">1. Idea</text>
                            <text x="110" y="85" text-anchor="middle" font-size="8">3. Construcción</text>
                        </svg>
                    </div>`;
                default: return "";
            }
        }

        function renderQuestions() {
            const container = document.getElementById('quiz-container');
            questionsData.forEach((q, idx) => {
                const card = document.createElement('div');
                card.className = 'question-card bg-white p-6 rounded-2xl border border-slate-200 shadow-sm';
                card.id = `q-card-${idx}`;
                
                let html = `
                    <div class="flex items-center gap-3 mb-4">
                        <span class="bg-indigo-100 text-indigo-700 font-bold px-3 py-1 rounded-lg text-sm">#${idx + 1}</span>
                        <span class="text-xs uppercase tracking-wider text-slate-400 font-bold">${q.topic}</span>
                    </div>
                    <h3 class="text-lg font-semibold text-slate-800 mb-4">${q.q}</h3>
                `;

                if(q.svg) html += getSVG(q.svg);

                html += `<div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-4">`;
                q.options.forEach((opt, oIdx) => {
                    html += `
                        <button onclick="checkAnswer(${idx}, ${oIdx})" id="btn-${idx}-${oIdx}" 
                                class="option-btn text-left p-4 rounded-xl border border-slate-200 hover:border-indigo-300 hover:bg-indigo-50 text-slate-700 font-medium">
                            ${opt}
                        </button>
                    `;
                });
                html += `</div>
                    <p id="feedback-${idx}" class="hidden font-bold text-sm mt-2"></p>
                `;

                card.innerHTML = html;
                container.appendChild(card);
            });
        }

        window.checkAnswer = function(qIdx, oIdx) {
            const q = questionsData[qIdx];
            const feedback = document.getElementById(`feedback-${qIdx}`);
            const card = document.getElementById(`q-card-${qIdx}`);
            const selectedBtn = document.getElementById(`btn-${qIdx}-${oIdx}`);

            if(oIdx === q.correct) {
                // Correct
                if(!card.dataset.alreadyAnswered) {
                    answeredQuestions++;
                    document.getElementById('current-count').innerText = answeredQuestions;
                }
                
                // Deshabilitar otros botones
                const btns = card.querySelectorAll('.option-btn');
                btns.forEach(b => b.disabled = true);
                
                selectedBtn.classList.add('correct-bg');
                feedback.innerText = "¡Correcto!";
                feedback.className = "font-bold text-sm mt-2 text-green-600";
                feedback.classList.remove('hidden');
                card.dataset.alreadyAnswered = "true";
            } else {
                // Incorrect
                if(!card.dataset.alreadyAnswered) {
                    errorCounter++;
                    document.getElementById('error-count').innerText = errorCounter;
                }
                selectedBtn.classList.add('incorrect-bg');
                feedback.innerText = "Incorrecto, vuelve a intentarlo";
                feedback.className = "font-bold text-sm mt-2 text-red-600";
                feedback.classList.remove('hidden');
            }
        };

        window.finalizarExamen = function() {
            const modal = document.getElementById('result-modal');
            const scoreDisplay = document.getElementById('final-score');
            const msgDisplay = document.getElementById('modal-msg');
            
            // Cálculo de nota: 
            // Cada acierto vale 0.2 puntos (total 10).
            // Restamos 0.05 por cada error cometido antes de acertar.
            let notaBase = answeredQuestions * 0.2;
            let penalizacion = errorCounter * 0.05;
            let notaFinal = Math.max(0, notaBase - penalizacion).toFixed(1);

            scoreDisplay.innerText = `${notaFinal} / 10`;
            modal.classList.remove('hidden');

            if(notaFinal >= 9) {
                msgDisplay.innerText = "¡Excelente! Eres un experto en tecnología. Has dominado todos los temas del trimestre.";
            } else if (notaFinal >= 7) {
                msgDisplay.innerText = "¡Muy buen trabajo! Tienes una base muy sólida. Repasa los pequeños errores de materiales.";
            } else if (notaFinal >= 5) {
                msgDisplay.innerText = "Aprobado. Conoces lo básico, pero te vendría bien repasar las propiedades específicas de la madera y el acero.";
            } else {
                msgDisplay.innerText = "Parece que necesitas estudiar un poco más. ¡No te rindas! Vuelve a leer los apuntes sobre el hormigón y el ladrillo.";
            }
        };

        // Iniciar
        renderQuestions();

    </script>
</body>
</html>
