<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejercicios de Repaso: Física y Química</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Estilo para un scroll suave */
        html {
            scroll-behavior: smooth;
        }
        /* Estilo para los placeholders */
        ::placeholder {
            color: #9ca3af;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 font-sans p-4 sm:p-6 md:p-8">
    <div class="max-w-4xl mx-auto">
        <header class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-indigo-600">Ejercicios de Repaso de Física y Química</h1>
            <p class="text-lg text-gray-600 mt-2">Introduce tus respuestas y comprueba los resultados al instante.</p>
        </header>

        <main id="exercise-container" class="space-y-8">
            <!-- Los ejercicios se cargarán aquí dinámicamente -->
        </main>
        
        <footer class="text-center mt-12 text-gray-500">
            <p>&copy; 2024 - Creado para practicar y aprender.</p>
        </footer>
    </div>

    <script>
        const exercises = [
            {
                topic: 'Conversión de unidades de longitud',
                questions: [
                    { question: '1. Expresa 12,5 kilómetros (km) en metros (m).', answer: '12500', unit: 'm' },
                    { question: '2. Convierte 340 centímetros (cm) a metros (m).', answer: '3.4', unit: 'm' },
                    { question: '3. Pasa 1.500 milímetros (mm) a hectómetros (Hm).', answer: '0.015', unit: 'Hm' },
                    { question: '4. Expresa 0,04 decámetros (dam) en centímetros (cm).', answer: '40', unit: 'cm' },
                    { question: '5. Convierte 250 metros (m) a kilómetros (km).', answer: '0.25', unit: 'km' }
                ]
            },
            {
                topic: 'Conversión de unidades compuestas',
                questions: [
                    { question: '1. Convierte una velocidad de 72 kilómetros por hora (km/h) a metros por segundo (m/s).', answer: '20', unit: 'm/s' },
                    { question: '2. Pasa una velocidad de 15 metros por segundo (m/s) a kilómetros por hora (km/h).', answer: '54', unit: 'km/h' },
                    { question: '3. Expresa una densidad de 1.000 kg/m³ a g/cm³.', answer: '1', unit: 'g/cm³' },
                    { question: '4. Convierte 20 centímetros por minuto (cm/min) a metros por segundo (m/s).', answer: '0.0033', unit: 'm/s (aprox.)', tolerance: 0.0001 },
                    { question: '5. Pasa una densidad de 2,5 gramos por litro (g/L) a kilogramos por metro cúbico (kg/m³).', answer: '2.5', unit: 'kg/m³' }
                ]
            },
            {
                topic: 'Factores de conversión simples',
                questions: [
                    { question: '1. Sabiendo que 1 hora son 60 minutos, convierte 4,5 horas a minutos.', answer: '270', unit: 'minutos' },
                    { question: '2. Sabiendo que 1 kg son 1.000 g, convierte 0,56 kg a g.', answer: '560', unit: 'g' },
                    { question: '3. Sabiendo que 1 L son 1.000 mL, convierte 300 mL a L.', answer: '0.3', unit: 'L' },
                    { question: '4. Sabiendo que 1 m son 100 cm, convierte 80 cm a m.', answer: '0.8', unit: 'm' },
                    { question: '5. Sabiendo que 1 g son 1.000 mg, convierte 5.200 mg a g.', answer: '5.2', unit: 'g' }
                ]
            },
            {
                topic: 'Expresar números en notación científica y decimal',
                questions: [
                    { question: '1. Expresa el número 345.000.000 en notación científica.', answer: ['3.45e+8', '3.45x10^8'], unit: '' },
                    { question: '2. Expresa el número 0,0000078 en notación científica.', answer: ['7.8e-6', '7.8x10^-6'], unit: '' },
                    { question: '3. Escribe el número 5,4 x 10⁵ en notación decimal.', answer: '540000', unit: '' },
                    { question: '4. Escribe el número 1,22 x 10⁻⁴ en notación decimal.', answer: '0.000122', unit: '' },
                    { question: '5. Expresa el número 0,00506 en notación científica.', answer: ['5.06e-3', '5.06x10^-3'], unit: '' }
                ]
            },
            {
                topic: 'Redondeo de números decimales',
                questions: [
                    { question: '1. Redondea 14,5678 a las centésimas (2 cifras decimales).', answer: '14.57', unit: '' },
                    { question: '2. Redondea 3,9981 a las centésimas (2 cifras decimales).', answer: '4.00', unit: '' },
                    { question: '3. Redondea 0,12345 a las milésimas (3 cifras decimales).', answer: '0.123', unit: '' },
                    { question: '4. Redondea 8,5000 a la décima (1 cifra decimal).', answer: '8.5', unit: '' },
                    { question: '5. Redondea 45,695 a las centésimas (2 cifras decimales).', answer: '45.70', unit: '' }
                ]
            }
        ];

        const container = document.getElementById('exercise-container');

        // Función para normalizar y comparar respuestas
        function checkAnswer(userAnswer, correctAnswer, tolerance = 0.001) {
            const normalizedUserAnswer = userAnswer.replace(/,/g, '.').replace(/\s/g, '').toLowerCase();

            if (Array.isArray(correctAnswer)) {
                // Para notación científica y otras respuestas con múltiples formatos válidos
                const normalizedCorrectAnswers = correctAnswer.map(ans => 
                    ans.replace(/,/g, '.').replace(/\s/g, '').toLowerCase()
                );
                return normalizedCorrectAnswers.includes(normalizedUserAnswer);
            } else {
                // Para respuestas numéricas estándar
                const userNum = parseFloat(normalizedUserAnswer);
                const correctNum = parseFloat(correctAnswer);
                if (!isNaN(userNum) && !isNaN(correctNum)) {
                    // Compara usando una tolerancia para manejar pequeñas diferencias en decimales
                    return Math.abs(userNum - correctNum) < tolerance;
                }
                return normalizedUserAnswer === correctAnswer.toLowerCase();
            }
        }


        // Generar el HTML para cada ejercicio
        exercises.forEach((topic, topicIndex) => {
            const section = document.createElement('section');
            section.className = 'bg-white p-6 rounded-lg shadow-md';
            section.innerHTML = `<h2 class="text-2xl font-semibold text-indigo-500 mb-6">${topic.topic}</h2>`;
            
            const questionsList = document.createElement('div');
            questionsList.className = 'space-y-6';
            
            topic.questions.forEach((q, questionIndex) => {
                const questionDiv = document.createElement('div');
                const uniqueId = `q-${topicIndex}-${questionIndex}`;

                questionDiv.innerHTML = `
                    <p class="text-gray-700 mb-2">${q.question}</p>
                    <div class="flex flex-col sm:flex-row items-stretch sm:items-center gap-2">
                        <input id="input-${uniqueId}" type="text" class="flex-grow p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-400 focus:border-transparent transition" placeholder="Tu respuesta...">
                        <button onclick="verify('${uniqueId}')" class="bg-indigo-500 text-white px-4 py-2 rounded-md hover:bg-indigo-600 transition-colors duration-300 font-semibold">Comprobar</button>
                    </div>
                    <div id="result-${uniqueId}" class="mt-2 text-sm h-6"></div> <!-- Espacio para el resultado -->
                `;
                questionsList.appendChild(questionDiv);
            });

            section.appendChild(questionsList);
            container.appendChild(section);
        });

        // Función global para verificar la respuesta
        window.verify = function(id) {
            const [_, topicIndex, questionIndex] = id.split('-');
            const exercise = exercises[topicIndex].questions[questionIndex];
            const userInput = document.getElementById(`input-${id}`);
            const resultDiv = document.getElementById(`result-${id}`);
            
            if (userInput.value.trim() === '') {
                resultDiv.innerHTML = `<span class="font-semibold text-yellow-600">Por favor, introduce una respuesta.</span>`;
                return;
            }

            const isCorrect = checkAnswer(userInput.value, exercise.answer, exercise.tolerance);

            if (isCorrect) {
                resultDiv.innerHTML = `<span class="font-semibold text-green-600">¡Correcto! ✔️</span>`;
                userInput.classList.remove('border-red-500');
                userInput.classList.add('border-green-500');
            } else {
                let correctAnswerText = Array.isArray(exercise.answer) ? exercise.answer[0] : exercise.answer;
                resultDiv.innerHTML = `<span class="font-semibold text-red-600">Incorrecto. La respuesta es ${correctAnswerText} ${exercise.unit}.</span>`;
                userInput.classList.remove('border-green-500');
                userInput.classList.add('border-red-500');
            }
        }
    </script>
</body>
</html>
