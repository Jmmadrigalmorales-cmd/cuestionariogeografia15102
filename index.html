<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Super Quiz - 50 Preguntas</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@300;400;600&display=swap');

        body {
            font-family: 'Fredoka', 'Comic Sans MS', sans-serif;
            background-color: #e0f7fa;
            margin: 0;
            padding: 20px;
            color: #333;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .container {
            width: 100%;
            max-width: 700px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            color: #00838f;
            font-size: 2.2em;
            margin-bottom: 5px;
            text-shadow: 2px 2px 0px #fff;
        }

        p.subtitle {
            text-align: center;
            font-size: 1.1em;
            color: #006064;
            margin-bottom: 20px;
        }

        /* --- QUIZ CONTAINER --- */
        .quiz-container {
            background: white;
            padding: 30px;
            border-radius: 25px;
            box-shadow: 0 10px 30px rgba(0,131,143,0.2);
            text-align: center;
            border: 4px solid #b2ebf2;
            position: relative;
            overflow: hidden;
        }

        /* Progress Bar */
        .progress-bar-container {
            width: 100%;
            background-color: #e0f2f1;
            height: 10px;
            border-radius: 5px;
            margin-bottom: 25px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background-color: #00bcd4;
            width: 0%;
            transition: width 0.3s ease;
        }

        .question-number {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 0.9em;
            color: #aaa;
            font-weight: bold;
        }

        .emoji {
            font-size: 5em;
            margin-bottom: 15px;
            display: block;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
            40% {transform: translateY(-10px);}
            60% {transform: translateY(-5px);}
        }

        .quiz-question {
            font-size: 1.8em;
            margin-bottom: 25px;
            color: #0277bd;
            font-weight: 600;
        }

        .quiz-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .option-btn {
            background: #f0f4c3; /* Light lime background */
            border: 3px solid #e6ee9c;
            padding: 15px;
            border-radius: 15px;
            font-size: 1.2em;
            cursor: pointer;
            font-family: 'Fredoka', sans-serif;
            color: #558b2f;
            font-weight: bold;
            transition: all 0.2s;
            box-shadow: 0 4px 0 #cddc39;
        }

        .option-btn:hover {
            transform: translateY(-2px);
            background: #e6ee9c;
        }

        .option-btn:active {
            transform: translateY(2px);
            box-shadow: 0 0 0 #cddc39;
        }

        .option-btn:disabled {
            cursor: default;
            opacity: 0.7;
            transform: none !important;
        }

        .option-btn.correct {
            background: #a5d6a7 !important;
            border-color: #66bb6a !important;
            color: #1b5e20 !important;
            box-shadow: 0 4px 0 #43a047 !important;
        }

        .option-btn.wrong {
            background: #ef9a9a !important;
            border-color: #ef5350 !important;
            color: #b71c1c !important;
            box-shadow: 0 4px 0 #e53935 !important;
        }

        .feedback-area {
            min-height: 60px;
            margin-top: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .score-display {
            font-size: 1.4em;
            font-weight: bold;
            color: #00838f;
        }

        .next-btn {
            padding: 12px 35px;
            background: #00bcd4;
            color: white;
            border: none;
            border-radius: 20px;
            font-size: 1.3em;
            font-family: 'Fredoka', sans-serif;
            cursor: pointer;
            display: none; /* Hidden initially */
            box-shadow: 0 4px 0 #0097a7;
            transition: transform 0.1s;
        }

        .next-btn:active {
            transform: translateY(4px);
            box-shadow: none;
        }

        /* --- RESULTS SCREEN --- */
        #quiz-end {
            text-align: center;
        }
        .final-score {
            font-size: 3em;
            color: #00bcd4;
            margin: 20px 0;
            font-weight: bold;
        }
        .restart-btn {
            background: #ff7043;
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.5em;
            border-radius: 30px;
            cursor: pointer;
            font-family: 'Fredoka', sans-serif;
            box-shadow: 0 5px 0 #d84315;
        }
        .restart-btn:hover { background: #ff5722; }
        .restart-btn:active { transform: translateY(5px); box-shadow: none; }

        @media (max-width: 500px) {
            .quiz-options {
                grid-template-columns: 1fr;
            }
            .emoji { font-size: 4em; }
        }
    </style>
</head>
<body>

<div class="container">
    <h1>üá¨üáß English Super Quiz üá¨üáß</h1>
    <p class="subtitle">50 Preguntas para ser un experto</p>

    <div class="quiz-container">
        
        <!-- Progress Bar -->
        <div class="progress-bar-container">
            <div class="progress-bar" id="progress-bar"></div>
        </div>
        <div class="question-number" id="q-number">1 / 50</div>

        <!-- Quiz Content -->
        <div id="quiz-content">
            <div class="emoji" id="q-emoji">ü§î</div>
            <div class="quiz-question" id="q-text">Loading question...</div>
            
            <div class="quiz-options" id="q-options">
                <!-- Buttons injected by JS -->
            </div>

            <div class="feedback-area">
                <div class="score-display" id="current-score">Puntos: 0</div>
                <button class="next-btn" id="next-btn" onclick="nextQuestion()">Siguiente ‚û°Ô∏è</button>
            </div>
        </div>

        <!-- End Screen -->
        <div id="quiz-end" style="display:none;">
            <h2>üéâ ¬°Examen Completado! üéâ</h2>
            <p>Tu puntuaci√≥n final es:</p>
            <div class="final-score" id="final-score-text">0 / 50</div>
            <p id="final-message">¬°Buen trabajo!</p>
            <button class="restart-btn" onclick="startQuiz()">Repetir Examen üîÑ</button>
        </div>

    </div>
</div>

<script>
    // --- 1. VOCABULARY DATABASE ---
    const baseVocab = [
        // Art & Tech
        { id: "v1", en: "Portrait", es: "Retrato (persona)", emoji: "üñºÔ∏èüßî", type: "vocab" },
        { id: "v2", en: "Landscape", es: "Paisaje (campo)", emoji: "üèûÔ∏èüå≤", type: "vocab" },
        { id: "v3", en: "Paintbrush", es: "Pincel", emoji: "üñåÔ∏è", type: "vocab" },
        { id: "v4", en: "App", es: "Aplicaci√≥n", emoji: "üì±", type: "vocab" },
        { id: "v5", en: "Download", es: "Descargar", emoji: "‚¨áÔ∏è", type: "vocab" },
        { id: "v6", en: "Click", es: "Hacer clic", emoji: "üñ±Ô∏èüëÜ", type: "vocab" },
        // Weekend Activities
        { id: "v7", en: "Visit museums", es: "Visitar museos", emoji: "üèõÔ∏è", type: "vocab" },
        { id: "v8", en: "Play card games", es: "Jugar a las cartas", emoji: "üÉè", type: "vocab" },
        { id: "v9", en: "Make cakes", es: "Hacer pasteles", emoji: "üßÅüë©‚Äçüç≥", type: "vocab" },
        { id: "v10", en: "Make videos", es: "Hacer v√≠deos", emoji: "üìπüé¨", type: "vocab" },
        { id: "v11", en: "Watch sport", es: "Ver deportes", emoji: "‚öΩüì∫", type: "vocab" },
        { id: "v12", en: "Draw pictures", es: "Dibujar", emoji: "‚úèÔ∏èüé®", type: "vocab" },
        { id: "v13", en: "Play the piano", es: "Tocar el piano", emoji: "üéπ", type: "vocab" },
        { id: "v14", en: "Visit grandparents", es: "Visitar abuelos", emoji: "üëµüë¥", type: "vocab" },
        { id: "v15", en: "Watch films", es: "Ver pel√≠culas", emoji: "üçøüé•", type: "vocab" }
    ];

    const grammarQuestions = [
        { q: "I _____ go to school on Sunday.", correct: "don't", wrong: ["do", "doesn't", "doing"], emoji: "‚ùåüè´" },
        { q: "What _____ you do at the weekend?", correct: "do", wrong: ["don't", "does", "making"], emoji: "‚ùìüìÖ" },
        { q: "We _____ cakes with my friends.", correct: "make", wrong: ["makes", "making", "do"], emoji: "üßÅ" },
        { q: "She _____ a painting.", correct: "paints", wrong: ["paint", "painting", "punted"], emoji: "üé®" },
        { q: "We don't _____ videos.", correct: "make", wrong: ["makes", "making", "did"], emoji: "üìπ" }
    ];

    // --- 2. GAME STATE ---
    let fullQuestionList = [];
    let currentIndex = 0;
    let score = 0;
    const TOTAL_QUESTIONS = 50;

    // --- 3. QUESTION GENERATOR ---
    function generateQuestionBank() {
        let bank = [];

        // Loop to create 50 mixed questions
        // We have 15 vocab words.
        // Round 1: EN -> ES (15 questions)
        baseVocab.forEach(item => {
            bank.push({
                type: "en-es",
                text: `¬øQu√© significa "${item.en}"?`,
                correct: item.es,
                emoji: item.emoji,
                data: item
            });
        });

        // Round 2: ES -> EN (15 questions)
        baseVocab.forEach(item => {
            bank.push({
                type: "es-en",
                text: `¬øC√≥mo se dice "${item.es}" en ingl√©s?`,
                correct: item.en,
                emoji: item.emoji,
                data: item
            });
        });

        // Round 3: Emoji -> EN (15 questions)
        baseVocab.forEach(item => {
            bank.push({
                type: "img-en",
                text: `¬øQu√© es esto?`,
                correct: item.en,
                emoji: item.emoji,
                data: item
            });
        });

        // Add Grammar Questions (5 questions)
        grammarQuestions.forEach(g => {
            bank.push({
                type: "grammar",
                text: g.q,
                correct: g.correct,
                emoji: g.emoji,
                wrongList: g.wrong
            });
        });

        // Shuffle all questions
        shuffleArray(bank);

        // Trim to exactly 50 if we have more, or loop if less (we have exactly 50 here: 15+15+15+5 = 50)
        return bank.slice(0, TOTAL_QUESTIONS);
    }

    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    // --- 4. GAME LOGIC ---

    function startQuiz() {
        fullQuestionList = generateQuestionBank();
        currentIndex = 0;
        score = 0;
        
        document.getElementById('quiz-end').style.display = 'none';
        document.getElementById('quiz-content').style.display = 'block';
        updateScoreDisplay();
        loadQuestion();
    }

    function loadQuestion() {
        const qData = fullQuestionList[currentIndex];
        
        // Update UI Text
        document.getElementById('q-emoji').innerText = qData.emoji;
        document.getElementById('q-text').innerText = qData.text;
        document.getElementById('q-number').innerText = `${currentIndex + 1} / ${TOTAL_QUESTIONS}`;
        
        // Update Progress Bar
        const progressPct = ((currentIndex) / TOTAL_QUESTIONS) * 100;
        document.getElementById('progress-bar').style.width = `${progressPct}%`;

        // Generate Options
        let options = [];
        
        if (qData.type === "grammar") {
            // Grammar uses specific wrong answers
            options = [qData.correct, ...qData.wrongList];
        } else {
            // Vocab needs random wrong answers from the database
            options = [qData.correct];
            
            // Get 3 wrong answers
            let attempts = 0;
            while(options.length < 4 && attempts < 100) {
                const randomItem = baseVocab[Math.floor(Math.random() * baseVocab.length)];
                let wrongVal = "";
                
                // If asking for Spanish translation, wrong answers must be Spanish
                if (qData.type === "en-es") wrongVal = randomItem.es;
                // Otherwise (English word needed), wrong answers must be English
                else wrongVal = randomItem.en;

                if (!options.includes(wrongVal)) {
                    options.push(wrongVal);
                }
                attempts++;
            }
        }
        
        shuffleArray(options);
        renderOptions(options, qData.correct);

        // Hide next button until answered
        document.getElementById('next-btn').style.display = 'none';
    }

    function renderOptions(optionsArr, correctAnswer) {
        const container = document.getElementById('q-options');
        container.innerHTML = ''; // Clear previous

        optionsArr.forEach(opt => {
            const btn = document.createElement('button');
            btn.className = 'option-btn';
            btn.innerText = opt;
            btn.onclick = () => handleAnswer(btn, opt, correctAnswer);
            container.appendChild(btn);
        });
    }

    function handleAnswer(btn, selected, correct) {
        // Disable all buttons
        const allBtns = document.querySelectorAll('.option-btn');
        allBtns.forEach(b => b.disabled = true);

        if (selected === correct) {
            btn.classList.add('correct');
            score++;
            // Play little success sound (optional, kept simple visually for now)
        } else {
            btn.classList.add('wrong');
            // Highlight the correct one
            allBtns.forEach(b => {
                if(b.innerText === correct) b.classList.add('correct');
            });
        }

        updateScoreDisplay();
        document.getElementById('next-btn').style.display = 'block';
    }

    function nextQuestion() {
        currentIndex++;
        if (currentIndex < TOTAL_QUESTIONS) {
            loadQuestion();
        } else {
            endQuiz();
        }
    }

    function updateScoreDisplay() {
        document.getElementById('current-score').innerText = `Puntos: ${score}`;
    }

    function endQuiz() {
        document.getElementById('quiz-content').style.display = 'none';
        document.getElementById('quiz-end').style.display = 'block';
        document.getElementById('progress-bar').style.width = '100%';
        
        document.getElementById('final-score-text').innerText = `${score} / ${TOTAL_QUESTIONS}`;

        let msg = "";
        if (score === 50) msg = "üèÜ ¬°INCRE√çBLE! ¬°ERES UN GENIO! üèÜ";
        else if (score >= 40) msg = "üéâ ¬°Excelente trabajo! üéâ";
        else if (score >= 25) msg = "üëç ¬°Muy bien, sigue practicando! üëç";
        else msg = "üí™ ¬°√Ånimo, t√∫ puedes mejorar! üí™";
        
        document.getElementById('final-message').innerText = msg;
    }

    // Start on load
    startQuiz();

</script>

</body>
</html>
