<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejercicios de Repaso: F√≠sica y Qu√≠mica</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Estilo para un scroll suave */
        html {
            scroll-behavior: smooth;
        }
        /* Estilo para los placeholders */
        ::placeholder {
            color: #9ca3af;
        }
        .theory-box {
            background-color: #f3f4f6; /* Un gris un poco m√°s claro */
            border-left: 4px solid #4f46e5; /* Borde izquierdo √≠ndigo */
            padding: 1rem;
            margin-bottom: 1.5rem;
            border-radius: 0.25rem;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 font-sans p-4 sm:p-6 md:p-8">
    <div class="max-w-4xl mx-auto">
        <header class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-indigo-600">Ejercicios de Repaso de F√≠sica y Qu√≠mica</h1>
            <p class="text-lg text-gray-600 mt-2">Introduce tus respuestas y comprueba los resultados al instante.</p>
        </header>

        <main id="exercise-container" class="space-y-8">
            <!-- Los ejercicios se cargar√°n aqu√≠ din√°micamente -->
        </main>
        
        <footer class="text-center mt-12 text-gray-500">
            <p>&copy; 2024 - Creado para practicar y aprender.</p>
        </footer>
    </div>
    
    <!-- Contador de Puntuaci√≥n -->
    <div id="scoreboard" class="fixed bottom-4 right-4 bg-white p-4 rounded-lg shadow-xl border border-gray-200 w-48">
        <h3 class="font-bold text-center mb-2 text-indigo-600">Puntuaci√≥n</h3>
        <div class="flex justify-around gap-4">
            <div class="text-center">
                <span class="font-bold text-2xl text-green-500" id="correct-count">0</span>
                <p class="text-sm text-gray-500">Correctas</p>
            </div>
            <div class="text-center">
                <span class="font-bold text-2xl text-red-500" id="incorrect-count">0</span>
                <p class="text-sm text-gray-500">Incorrectas</p>
            </div>
        </div>
    </div>


    <script>
        let correctCount = 0;
        let incorrectCount = 0;
        const answeredQuestions = new Set(); // Almacena IDs de preguntas ya respondidas

        const exercises = [
            {
                topic: 'Conversi√≥n de unidades de longitud',
                theory: 'Imagina que quieres "traducir" una unidad a otra. Para eso, usamos los <strong>factores de conversi√≥n</strong>.<br><strong>La Regla de Oro:</strong> Multiplica tu n√∫mero por una fracci√≥n. Arriba pones la unidad a la que quieres llegar, y abajo la que quieres eliminar. ¬°As√≠ se tachan y listo!<br><em>üîç Ejemplo: Convertir 2,5 km a m.</em><br><code>2,5 km √ó (1000 m / 1 km) = 2500 m</code><br>Como "km" est√° arriba y abajo, se cancelan, dejando solo los "m".',
                questions: [
                    { question: '1. Expresa 12,5 kil√≥metros (km) en metros (m).', answer: '12500', unit: 'm' },
                    { question: '2. Convierte 340 cent√≠metros (cm) a metros (m).', answer: '3.4', unit: 'm' },
                    { question: '3. Pasa 1.500 mil√≠metros (mm) a hect√≥metros (Hm).', answer: '0.015', unit: 'Hm' },
                    { question: '4. Expresa 0,04 dec√°metros (dam) en cent√≠metros (cm).', answer: '40', unit: 'cm' },
                    { question: '5. Convierte 250 metros (m) a kil√≥metros (km).', answer: '0.25', unit: 'km' }
                ]
            },
            {
                topic: 'Conversi√≥n de unidades compuestas',
                theory: 'Aqu√≠ hay m√°s de una unidad, ¬°pero no te asustes! El truco es cambiar cada una por separado, con su propio factor de conversi√≥n.<br><em>üîç Ejemplo: Convertir 90 km/h a m/s.</em><br>Hacemos dos conversiones a la vez:<br>1Ô∏è‚É£ <strong>Distancia:</strong> de kil√≥metros (km) a metros (m).<br>2Ô∏è‚É£ <strong>Tiempo:</strong> de horas (h) a segundos (s).<br><code>90 km/h √ó (1000 m / 1 km) √ó (1 h / 3600 s) = 25 m/s</code><br>¬°Tachamos "km" con "km" y "h" con "h" y ya lo tenemos!',
                questions: [
                    { question: '1. Convierte una velocidad de 72 kil√≥metros por hora (km/h) a metros por segundo (m/s).', answer: '20', unit: 'm/s' },
                    { question: '2. Pasa una velocidad de 15 metros por segundo (m/s) a kil√≥metros por hora (km/h).', answer: '54', unit: 'km/h' },
                    { question: '3. Expresa una densidad de 1.000 kg/m¬≥ a g/cm¬≥.', answer: '1', unit: 'g/cm¬≥' },
                    { question: '4. Convierte 20 cent√≠metros por minuto (cm/min) a metros por segundo (m/s).', answer: '0.0033', unit: 'm/s (aprox.)', tolerance: 0.0001 },
                    { question: '5. Pasa una densidad de 2,5 gramos por litro (g/L) a kilogramos por metro c√∫bico (kg/m¬≥).', answer: '2.5', unit: 'kg/m¬≥' }
                ]
            },
            {
                topic: 'Factores de conversi√≥n simples',
                theory: 'Este m√©todo es una receta que siempre funciona:<br><code>Valor que tienes √ó (Unidad a la que vas / Unidad que tienes) = Resultado</code><br>La "unidad que tienes" se cancela y te quedas con la que quer√≠as.<br><em>üîç Ejemplo: Convertir 180 minutos a horas (sabiendo que 1 h = 60 min).</em><br><code>180 min √ó (1 h / 60 min) = 3 h</code>',
                questions: [
                    { question: '1. Sabiendo que 1 hora son 60 minutos, convierte 4,5 horas a minutos.', answer: '270', unit: 'minutos' },
                    { question: '2. Sabiendo que 1 kg son 1.000 g, convierte 0,56 kg a g.', answer: '560', unit: 'g' },
                    { question: '3. Sabiendo que 1 L son 1.000 mL, convierte 300 mL a L.', answer: '0.3', unit: 'L' },
                    { question: '4. Sabiendo que 1 m son 100 cm, convierte 80 cm a m.', answer: '0.8', unit: 'm' },
                    { question: '5. Sabiendo que 1 g son 1.000 mg, convierte 5.200 mg a g.', answer: '5.2', unit: 'g' }
                ]
            },
            {
                topic: 'Expresar n√∫meros en notaci√≥n cient√≠fica y decimal',
                theory: 'Esto sirve para escribir n√∫meros gigantes o s√∫per peque√±os de forma c√≥moda.<br><strong>De n√∫mero normal a cient√≠fico:</strong><br>Mueve la coma hasta que solo quede una cifra delante (que no sea cero). Los saltos que das son el exponente.<br>‚û°Ô∏è Si el n√∫mero era grande (>1), el exponente es positivo.<br>‚¨ÖÔ∏è Si era peque√±o (<1), el exponente es negativo.<br><em>üîç Ejemplo: 0,0045 ‚ü∂ movemos la coma 3 sitios a la derecha ‚ü∂ 4,5 x 10‚Åª¬≥</em><br><strong>De cient√≠fico a normal:</strong><br>Mueve la coma seg√∫n el exponente. Positivo a la derecha, negativo a la izquierda.<br><em>üîç Ejemplo: 2,1 x 10‚Å¥ ‚ü∂ movemos la coma 4 sitios a la derecha ‚ü∂ 21000</em>',
                questions: [
                    { question: '1. Expresa el n√∫mero 345.000.000 en notaci√≥n cient√≠fica.', answer: ['3.45e+8', '3.45x10^8'], unit: '' },
                    { question: '2. Expresa el n√∫mero 0,0000078 en notaci√≥n cient√≠fica.', answer: ['7.8e-6', '7.8x10^-6'], unit: '' },
                    { question: '3. Escribe el n√∫mero 5,4 x 10‚Åµ en notaci√≥n decimal.', answer: '540000', unit: '' },
                    { question: '4. Escribe el n√∫mero 1,22 x 10‚Åª‚Å¥ en notaci√≥n decimal.', answer: '0.000122', unit: '' },
                    { question: '5. Expresa el n√∫mero 0,00506 en notaci√≥n cient√≠fica.', answer: ['5.06e-3', '5.06x10^-3'], unit: '' }
                ]
            },
            {
                topic: 'Redondeo de n√∫meros decimales',
                theory: 'Redondear es simplificar. ¬°Sigue estos pasos!<br>1Ô∏è‚É£ Busca la cifra hasta la que quieres redondear (ej: las cent√©simas).<br>2Ô∏è‚É£ Mira a su "vecino" de la derecha.<br>üìà Si el vecino es <strong>5 o m√°s grande</strong> (5, 6, 7, 8, 9) ‚Üí S√∫male 1 a tu cifra.<br>üòê Si el vecino es <strong>m√°s peque√±o que 5</strong> (0, 1, 2, 3, 4) ‚Üí Tu cifra se queda igual.<br>3Ô∏è‚É£ ¬°Borra todos los vecinos de la derecha!<br><em>üîç Ejemplo: Redondear 7,837 a las cent√©simas.</em><br>Tu cifra es el <strong>3</strong>. Su vecino es el <strong>7</strong>. Como es mayor que 5, el 3 sube a 4. Resultado: <strong>7,84</strong>',
                questions: [
                    { question: '1. Redondea 14,5678 a las cent√©simas (2 cifras decimales).', answer: '14.57', unit: '' },
                    { question: '2. Redondea 3,9981 a las cent√©simas (2 cifras decimales).', answer: '4.00', unit: '' },
                    { question: '3. Redondea 0,12345 a las mil√©simas (3 cifras decimales).', answer: '0.123', unit: '' },
                    { question: '4. Redondea 8,5000 a la d√©cima (1 cifra decimal).', answer: '8.5', unit: '' },
                    { question: '5. Redondea 45,695 a las cent√©simas (2 cifras decimales).', answer: '45.70', unit: '' }
                ]
            }
        ];

        const container = document.getElementById('exercise-container');

        // Funci√≥n para actualizar el contador en la pantalla
        function updateScoreboard() {
            document.getElementById('correct-count').textContent = correctCount;
            document.getElementById('incorrect-count').textContent = incorrectCount;
        }

        // Funci√≥n para normalizar y comparar respuestas
        function checkAnswer(userAnswer, correctAnswer, tolerance = 0.001) {
            const normalizedUserAnswer = userAnswer.replace(/,/g, '.').replace(/\s/g, '').toLowerCase();

            if (Array.isArray(correctAnswer)) {
                // Para notaci√≥n cient√≠fica y otras respuestas con m√∫ltiples formatos v√°lidos
                const normalizedCorrectAnswers = correctAnswer.map(ans => 
                    ans.replace(/,/g, '.').replace(/\s/g, '').toLowerCase()
                );
                return normalizedCorrectAnswers.includes(normalizedUserAnswer);
            } else {
                // Para respuestas num√©ricas est√°ndar
                const userNum = parseFloat(normalizedUserAnswer);
                const correctNum = parseFloat(correctAnswer);
                if (!isNaN(userNum) && !isNaN(correctNum)) {
                    // Compara usando una tolerancia para manejar peque√±as diferencias en decimales
                    return Math.abs(userNum - correctNum) < tolerance;
                }
                return normalizedUserAnswer === correctAnswer.toLowerCase();
            }
        }


        // Generar el HTML para cada ejercicio
        exercises.forEach((topic, topicIndex) => {
            const section = document.createElement('section');
            section.className = 'bg-white p-6 rounded-lg shadow-md';
            section.innerHTML = `
                <h2 class="text-2xl font-semibold text-indigo-500 mb-4">${topic.topic}</h2>
                <div class="theory-box text-sm text-gray-700 space-y-2">${topic.theory}</div>
            `;
            
            const questionsList = document.createElement('div');
            questionsList.className = 'space-y-6';
            
            topic.questions.forEach((q, questionIndex) => {
                const questionDiv = document.createElement('div');
                const uniqueId = `q-${topicIndex}-${questionIndex}`;

                questionDiv.innerHTML = `
                    <p class="text-gray-700 mb-2">${q.question}</p>
                    <div class="flex flex-col sm:flex-row items-stretch sm:items-center gap-2">
                        <input id="input-${uniqueId}" type="text" class="flex-grow p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-400 focus:border-transparent transition" placeholder="Tu respuesta...">
                        <button onclick="verify('${uniqueId}')" class="bg-indigo-500 text-white px-4 py-2 rounded-md hover:bg-indigo-600 transition-colors duration-300 font-semibold">Comprobar</button>
                    </div>
                    <div id="result-${uniqueId}" class="mt-2 text-sm h-6"></div> <!-- Espacio para el resultado -->
                `;
                questionsList.appendChild(questionDiv);
            });

            section.appendChild(questionsList);
            container.appendChild(section);
        });

        // Funci√≥n global para verificar la respuesta
        window.verify = function(id) {
            const [_, topicIndex, questionIndex] = id.split('-');
            const exercise = exercises[topicIndex].questions[questionIndex];
            const userInput = document.getElementById(`input-${id}`);
            const resultDiv = document.getElementById(`result-${id}`);
            
            if (userInput.value.trim() === '') {
                resultDiv.innerHTML = `<span class="font-semibold text-yellow-600">Por favor, introduce una respuesta.</span>`;
                return;
            }

            const isCorrect = checkAnswer(userInput.value, exercise.answer, exercise.tolerance);
            
            // Solo actualiza la puntuaci√≥n si es la primera vez que se responde esta pregunta
            if (!answeredQuestions.has(id)) {
                if (isCorrect) {
                    correctCount++;
                } else {
                    incorrectCount++;
                }
                answeredQuestions.add(id);
                updateScoreboard();
            }

            // Muestra siempre el mensaje de correcto/incorrecto
            if (isCorrect) {
                resultDiv.innerHTML = `<span class="font-semibold text-green-600">¬°Correcto! ‚úîÔ∏è</span>`;
                userInput.classList.remove('border-red-500');
                userInput.classList.add('border-green-500');
            } else {
                let correctAnswerText = Array.isArray(exercise.answer) ? exercise.answer[0] : exercise.answer;
                resultDiv.innerHTML = `<span class="font-semibold text-red-600">Incorrecto. La respuesta es ${correctAnswerText} ${exercise.unit}.</span>`;
                userInput.classList.remove('border-green-500');
                userInput.classList.add('border-red-500');
            }
        }
    </script>
</body>
</html>

